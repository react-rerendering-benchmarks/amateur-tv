(()=>{"use strict";var e,a={55:()=>{const e=window.wp.blocks,a=window.wp.element,t=window.wp.i18n,l=window.wp.blockEditor,n=window.wp.data,r=window.wp.coreData,o=window.wp.components;(0,e.registerBlockType)("amateur-tv/feed",{edit:function(e){(0,l.useBlockProps)();const{attributes:m,setAttributes:i}=e,{usernameColor:s,lang:u,liveColor:c,displayLive:v,displayTopic:_,displayGenre:g,displayUsers:p,bgColor:h,genre:b,age:d,topicColor:C,link:w,targetNew:E,labelBgColor:f,imageWidth:S,imageHeight:y,columnGap:k,autoRefresh:x,api:P,count:T,textShadowColor:L,textShadowValue:F,camLang:O,tags:I,order:N}=m,R="1px 1px",[A,B]=(0,a.useState)(!0),[j,G]=(0,a.useState)(null),[U]=(0,r.useEntityProp)("root","site","amateurtv_whitelabel"),H=new URL(P);if(U&&H.searchParams.set("wl",U),b&&H.searchParams.set("genre",b.join(",")),u&&H.searchParams.set("lang",u),d&&H.searchParams.set("age",d.join(",")),O&&H.searchParams.set("camLang",O.join(",")),I){const e=I.map((e=>e.toLowerCase()));H.searchParams.set("tag",e.join(","))}N&&H.searchParams.set("order",N);const[W,V]=(0,a.useState)(H),z=e=>{let a=e.val;e.multiple&&(a=a.join(",")),a?W.searchParams.set(e.name,a):W.searchParams.delete(e.name),console.log(W),G(null),V(W),B(!0)},M=(0,n.useSelect)((e=>{let a=e("core").getSite()?.language;return a&&a.split("_")[0]}));return(0,a.useEffect)((()=>{A&&fetch(W,{method:"GET"}).then((e=>e.json())).then((e=>{B(!1),G(e.body)})).catch((e=>console.error(e)))}),[A,W]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Filters","amateur-tv"),initialOpen:!0},(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Gender","amateur-tv"),value:b,multiple:!0,options:[{label:(0,t.__)("Woman","amateur-tv"),value:"W"},{label:(0,t.__)("Couple","amateur-tv"),value:"C"},{label:(0,t.__)("Man","amateur-tv"),value:"M"},{label:(0,t.__)("Trans","amateur-tv"),value:"T"}],onChange:e=>{i({genre:e}),z({name:"genre",val:e,multiple:!0})}}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Age","amateur-tv"),value:d,multiple:!0,options:[{label:"18-22",value:"18-22"},{label:"23-29",value:"23-29"},{label:"29-39",value:"29-39"},{label:"40",value:"40"}],onChange:e=>{i({age:e}),z({name:"age",val:e,multiple:!0})}}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Number of cams","amateur-tv"),value:T,initialPosition:j?j.length:0,onChange:e=>{i({count:e})},min:0,max:j?j.length:0}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Language","amateur-tv"),value:O,multiple:!0,help:(0,t.__)("Language spoken by model","amateur-tv"),options:[{label:(0,t.__)("English"),value:"en"},{label:(0,t.__)("Spanish"),value:"es"},{label:(0,t.__)("French"),value:"fr"},{label:(0,t.__)("German"),value:"de"},{label:(0,t.__)("Russian"),value:"ru"},{label:(0,t.__)("Italian"),value:"it"},{label:(0,t.__)("Portugese"),value:"pt"},{label:(0,t.__)("Chinese"),value:"cn"}],onChange:e=>{i({camLang:e}),z({name:"camLang",val:e,multiple:!0})}}),(0,a.createElement)(o.FormTokenField,{label:(0,t.__)("Tags","amateur-tv"),value:I,tokenizeOnSpace:!0,__experimentalValidateInput:e=>/^[aA-zZ]+$/.test(e),onChange:e=>{const a=e.map((e=>e.toLowerCase()));i({tags:a}),z({name:"tag",val:a,multiple:!0})}})),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Display Settings","amateur-tv"),initialOpen:!0},(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Language","amateur-tv"),value:u||M,options:[{label:(0,t.__)("English"),value:"en"},{label:(0,t.__)("Spanish"),value:"es"},{label:(0,t.__)("French"),value:"fr"},{label:(0,t.__)("German"),value:"de"}],onChange:e=>{i({lang:e}),z({name:"lang",val:e,multiple:!1})}}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Order","amateur-tv"),value:N,options:[{label:(0,t.__)("Featured","amateur-tv"),value:"highlighted"},{label:(0,t.__)("Viewers","amateur-tv"),value:"realviewers"},{label:(0,t.__)("New","amateur-tv"),value:"new"}],onChange:e=>{i({order:e}),z({name:"order",val:e,multiple:!1})}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Show Live Label","amateur-tv"),checked:!!v,onChange:e=>{i({displayLive:!v})}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Show Gender","amateur-tv"),checked:!!g,onChange:e=>{i({displayGenre:!g})}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Show Users","amateur-tv"),checked:!!p,onChange:e=>{i({displayUsers:!p})}}),(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Show Topic","amateur-tv"),checked:!!_,onChange:e=>{i({displayTopic:!_})}}),(0,a.createElement)(o.Flex,null,(0,a.createElement)(o.FlexBlock,null,(0,a.createElement)(o.FlexItem,null,(0,a.createElement)(o.TextControl,{label:(0,t.__)("Link","amateur-tv"),value:w,onChange:e=>{i({link:e})},help:(0,t.__)("Absolute or relative URL. Leave blank to use the link of the cam. Placeholders supported: {camname}, {affiliate}","amateur-tv")})),(0,a.createElement)(o.FlexItem,null,(0,a.createElement)(o.ToggleControl,{label:(0,t.__)("Open in new tab","amateur-tv"),checked:!!E,onChange:e=>{i({targetNew:e})}})))),(0,a.createElement)(l.PanelColorSettings,{title:(0,t.__)("Color Settings","amateur-tv"),initialOpen:!1,colorSettings:[{value:s,onChange:e=>{i({usernameColor:e})},label:(0,t.__)("Username/Gender","amateur-tv"),enableAlpha:!0},{value:c,onChange:e=>{i({liveColor:e})},label:(0,t.__)("Live Label","amateur-tv"),enableAlpha:!0},{value:C,onChange:e=>{i({topicColor:e})},label:(0,t.__)("Topic","amateur-tv"),enableAlpha:!0},{value:h,onChange:e=>{i({bgColor:e})},label:(0,t.__)("Background","amateur-tv"),enableAlpha:!0},{value:f,onChange:e=>{i({labelBgColor:e})},label:(0,t.__)("Username/Topic Background","amateur-tv"),colors:[{color:"#00000021"},{color:"#0000FF21"},{color:"#FF000021"},{color:"#00FF0021"}],enableAlpha:!0},{value:L,onChange:e=>{i({textShadowColor:e}),i(void 0!==e?{textShadowValue:[R,e].join(" ")}:{textShadowValue:null})},label:(0,t.__)("Text Shadow","amateur-tv"),enableAlpha:!1}]}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Column Gap","amateur-tv"),value:k,initialPosition:3,onChange:e=>{i({columnGap:e})},min:0,max:10}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Image Height","amateur-tv"),value:y,initialPosition:115,onChange:e=>{i({imageHeight:e})},min:115,max:500}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Image Width","amateur-tv"),value:S,initialPosition:216,onChange:e=>{i({imageWidth:e})},min:216,max:500}),(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Auto Refresh (minutes)","amateur-tv"),value:x,initialPosition:0,onChange:e=>{i({autoRefresh:e})},min:0,max:10}))),!!A&&(0,a.createElement)("div",{key:"loading",className:"wp-block-embed is-loading"},(0,a.createElement)(o.Spinner,null),(0,a.createElement)("p",null,(0,t.__)("Fetching...","amateur-tv"))),(0,a.createElement)("div",(0,l.useBlockProps)(),(0,a.createElement)("div",{className:"atv-cams-list",style:{backgroundColor:h,gap:k}},!!j&&j.slice(0,T>0?T:j.length).map(((e,l)=>(0,a.createElement)("a",{key:l,target:"_blank",className:"atv-cam"},(0,a.createElement)("img",{src:e.image,width:S,height:y,style:{maxHeight:y}}),(0,a.createElement)("div",{className:"atv-annotations"},!!v&&(0,a.createElement)("span",{className:"atv-live atv-padding",style:{color:c,textShadow:F}},(0,t.__)("Live","amateur-tv")),!!g&&(0,a.createElement)("span",{className:"atv-genre atv-padding",style:{color:s,textShadow:F}},(0,t.__)(e.genre,"amateur-tv")),!!p&&(0,a.createElement)("span",{className:"atv-viewers atv-padding",style:{color:c,textShadow:F}},(0,a.createElement)("span",{className:"dashicons dashicons-visibility"}),(0,a.createElement)("span",null,e.viewers)),(0,a.createElement)("span",{className:"atv-username atv-padding atv-rounded",style:{color:s,backgroundColor:f,textShadow:F}},e.username),!!_&&(0,a.createElement)("div",{className:"atv-topic atv-padding atv-rounded",style:{color:C,backgroundColor:f,textShadow:F}},e.topic))))))))},save:function(e){return null}}),(0,e.registerBlockType)("amateur-tv/iframe",{edit:function(e){const{attributes:n,setAttributes:m}=e,[i]=(0,r.useEntityProp)("root","site","amateurtv_whitelabel"),{genre:s,age:u,iframeHeight:c,camType:v,camName:_,camLang:g,tags:p,iframeUrl:h}=n,b={popular:(0,t.__)("It will randomly show a live cam from the most popular cams according to your filters","amateur-tv"),camname:(0,t.__)("It will show the cam of the below mentioned username, even if it is offline. If the name doesn't exist, it will show a random cam from the same genre","amateur-tv"),camparam:(0,t.__)('It will show the cam from the parameter on the URL with the name "livecam". If the name doesn\'t exist, it will show a random cam from the same genre',"amateur-tv")},[d,C]=(0,a.useState)(new URL(h+c)),w=e=>{let a=d,t=e.val;e.multiple&&(t=t.join(",")),t?a.searchParams.set(e.name,t):a.searchParams.delete(e.name),C(d)};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(l.InspectorControls,null,(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Filters","amateur-tv"),initialOpen:!0},(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Gender","amateur-tv"),value:s,multiple:!0,options:[{label:(0,t.__)("Woman","amateur-tv"),value:"W"},{label:(0,t.__)("Couple","amateur-tv"),value:"C"},{label:(0,t.__)("Man","amateur-tv"),value:"M"},{label:(0,t.__)("Trans","amateur-tv"),value:"T"}],onChange:e=>{m({genre:e}),w({name:"genre",val:e,multiple:!0})}}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Age","amateur-tv"),value:u,multiple:!0,options:[{label:"18-22",value:"18-22"},{label:"23-29",value:"23-29"},{label:"29-39",value:"29-39"},{label:"40",value:"40"}],onChange:e=>{m({age:e}),w({name:"age",val:e,multiple:!0})}}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Language","amateur-tv"),value:g,multiple:!0,help:(0,t.__)("Language spoken by model","amateur-tv"),options:[{label:(0,t.__)("English"),value:"en"},{label:(0,t.__)("Spanish"),value:"es"},{label:(0,t.__)("French"),value:"fr"},{label:(0,t.__)("German"),value:"de"},{label:(0,t.__)("Russian"),value:"ru"},{label:(0,t.__)("Italian"),value:"it"},{label:(0,t.__)("Portugese"),value:"pt"},{label:(0,t.__)("Chinese"),value:"cn"}],onChange:e=>{m({camLang:e}),w({name:"camLang",val:e,multiple:!0})}}),(0,a.createElement)(o.FormTokenField,{label:(0,t.__)("Tags","amateur-tv"),value:p,tokenizeOnSpace:!0,__experimentalValidateInput:e=>/^[aA-zZ]+$/.test(e),onChange:e=>{const a=e.map((e=>e.toLowerCase()));m({tags:a}),w({name:"tag",val:a,multiple:!0})}}),(0,a.createElement)(o.SelectControl,{label:(0,t.__)("Cam Type","amateur-tv"),value:v,options:[{label:(0,t.__)("Most Popular","amateur-tv"),value:"popular"},{label:(0,t.__)("Specific Camname","amateur-tv"),value:"camname"},{label:(0,t.__)("Camname Parameter","amateur-tv"),value:"camparam"}],help:b[v],onChange:e=>{m({camType:e}),w({name:"livecam",val:""})}}),"camname"===v&&(0,a.createElement)(o.TextControl,{label:(0,t.__)("Camname","amateur-tv"),value:_,onChange:e=>{m({camName:e}),w({name:"livecam",val:e})}})),(0,a.createElement)(o.PanelBody,{title:(0,t.__)("Display Settings","amateur-tv"),initialOpen:!0},(0,a.createElement)(o.RangeControl,{label:(0,t.__)("Iframe Height","amateur-tv"),value:c,initialPosition:590,onChange:e=>{m({iframeHeight:e})},min:200,max:1e3,step:50,type:"stepper",allowReset:!0}))),(0,a.createElement)("div",(0,l.useBlockProps)(),(0,a.createElement)("div",{className:"atv-iframe"},(0,a.createElement)("iframe",{width:"100%",height:c,src:i?d.toString().replace("www.amateur.tv",i):d.toString(),frameborder:"0",className:"atv_lazy_load_iframe"}),(0,a.createElement)("script",{src:(()=>{let e="https://www.amateur.tv/js/IntersectionObserverIframe.js";return i?e.replace("www.amateur.tv",i):e})()}))))},save:function(e){return null}})}},t={};function l(e){var n=t[e];if(void 0!==n)return n.exports;var r=t[e]={exports:{}};return a[e](r,r.exports,l),r.exports}l.m=a,e=[],l.O=(a,t,n,r)=>{if(!t){var o=1/0;for(u=0;u<e.length;u++){for(var[t,n,r]=e[u],m=!0,i=0;i<t.length;i++)(!1&r||o>=r)&&Object.keys(l.O).every((e=>l.O[e](t[i])))?t.splice(i--,1):(m=!1,r<o&&(o=r));if(m){e.splice(u--,1);var s=n();void 0!==s&&(a=s)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,n,r]},l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={826:0,431:0};l.O.j=a=>0===e[a];var a=(a,t)=>{var n,r,[o,m,i]=t,s=0;if(o.some((a=>0!==e[a]))){for(n in m)l.o(m,n)&&(l.m[n]=m[n]);if(i)var u=i(l)}for(a&&a(t);s<o.length;s++)r=o[s],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(u)},t=globalThis.webpackChunkamateur_tv=globalThis.webpackChunkamateur_tv||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var n=l.O(void 0,[431],(()=>l(55)));n=l.O(n)})();